import tkinter as tk\nfrom tkinter import ttk, messagebox, filedialog\nimport pandas as pd\nimport numpy as np\nfrom datetime import datetime\nimport matplotlib.pyplot as plt\nfrom matplotlib.backends.backend_tkagg import FigureCanvasTkAgg\nfrom matplotlib.figure import Figure\nimport matplotlib.patches as mpatches\nfrom matplotlib.patches import Rectangle\nimport matplotlib\nfrom pathlib import Path\n\n# Â∞éÂÖ• SMC ÊåáÊ®ô\nfrom smc_indicator_complete import SmartMoneyConceptsLuxAlgo, plot_smc_analysis\n\n# Ë®≠ÁΩÆÂ≠óÈ´îÊîØÊåÅ\nplt.rcParams['font.sans-serif'] = ['SimHei', 'DejaVu Sans', 'Arial Unicode MS', 'Microsoft YaHei']\nplt.rcParams['axes.unicode_minus'] = False\nmatplotlib.rcParams['figure.dpi'] = 100\n\n\nclass ImprovedModelEnsembleGUI:\n    def __init__(self, root):\n        self.root = root\n        self.root.title('Âä†ÂØÜË≤®Âπ£È†êÊ∏¨Á≥ªÁµ± + Êô∫ÊÖßÈáëÈå¢Ê¶ÇÂøµ')\n        self.root.geometry('1600x950')\n        \n        self.df = None\n        self.smc_result = None\n        \n        self.notebook = ttk.Notebook(root)\n        self.notebook.pack(fill=tk.BOTH, expand=True, padx=10, pady=10)\n        \n        # Ê®ôÁ±§È†Å 1: Êï∏ÊìöÂä†Ëºâ\n        self.load_frame = ttk.Frame(self.notebook)\n        self.notebook.add(self.load_frame, text='Êï∏ÊìöÂä†Ëºâ')\n        self.setup_load_tab()\n        \n        # Ê®ôÁ±§È†Å 2: SMC ÂàÜÊûê (‰∏ªË¶Å)\n        self.smc_frame = ttk.Frame(self.notebook)\n        self.notebook.add(self.smc_frame, text='Êô∫ÊÖßÈáëÈå¢Ê¶ÇÂøµÂàÜÊûê')\n        self.setup_smc_tab()\n        \n        # Ê®ôÁ±§È†Å 3: Ë©≥Á¥∞Áµ±Ë®à\n        self.stats_frame = ttk.Frame(self.notebook)\n        self.notebook.add(self.stats_frame, text='Áµ±Ë®à‰ø°ÊÅØ')\n        self.setup_stats_tab()\n\n    def setup_load_tab(self):\n        \"\"\"Ë®≠ÁΩÆÊï∏ÊìöÂä†ËºâÊ®ôÁ±§È†Å\"\"\"\n        frame = ttk.LabelFrame(self.load_frame, text='Êï∏ÊìöÂä†Ëºâ', padding=20)\n        frame.pack(fill=tk.BOTH, expand=True, padx=10, pady=10)\n        \n        ttk.Button(frame, text='Âä†ËºâÊú¨Âú∞ CSV/Parquet', \n                  command=self.load_local_data).pack(pady=10)\n        \n        ttk.Button(frame, text='Âä†ËºâÈªòË™çÊï∏Êìö (data/btc_15m.parquet)', \n                  command=self.load_default_data).pack(pady=10)\n        \n        ttk.Button(frame, text='Âæû Yahoo Finance ‰∏ãËºâ', \n                  command=self.load_from_yfinance).pack(pady=10)\n        \n        self.load_status = ttk.Label(frame, text='Êú™Âä†ËºâÊï∏Êìö', foreground='red')\n        self.load_status.pack(pady=10)\n        \n        self.load_info = ttk.Label(frame, text='', justify=tk.LEFT)\n        self.load_info.pack(pady=10)\n\n    def setup_smc_tab(self):\n        \"\"\"Ë®≠ÁΩÆ SMC ÂàÜÊûêÊ®ôÁ±§È†Å\"\"\"\n        frame = ttk.Frame(self.smc_frame)\n        frame.pack(fill=tk.BOTH, expand=True, padx=10, pady=10)\n        \n        # ÂèÉÊï∏Ë®≠ÁΩÆÊ°Ü\n        param_frame = ttk.LabelFrame(frame, text='SMC ÂèÉÊï∏Ë®≠ÁΩÆ', padding=10)\n        param_frame.pack(fill=tk.X, pady=10)\n        \n        ttk.Label(param_frame, text='ÊêñÊì∫Èï∑Â∫¶:').pack(side=tk.LEFT, padx=5)\n        self.swing_length_spinbox = ttk.Spinbox(param_frame, from_=10, to=200, width=10)\n        self.swing_length_spinbox.set(50)\n        self.swing_length_spinbox.pack(side=tk.LEFT, padx=5)\n        \n        ttk.Label(param_frame, text='ÂÖßÈÉ®ÁµêÊßãÈï∑Â∫¶:').pack(side=tk.LEFT, padx=5)\n        self.internal_length_spinbox = ttk.Spinbox(param_frame, from_=3, to=20, width=10)\n        self.internal_length_spinbox.set(5)\n        self.internal_length_spinbox.pack(side=tk.LEFT, padx=5)\n        \n        ttk.Button(param_frame, text='ÂàÜÊûê SMC', \n                  command=self.analyze_smc).pack(side=tk.LEFT, padx=5)\n        \n        ttk.Button(param_frame, text='Âà∑Êñ∞ÂúñË°®', \n                  command=self.refresh_chart).pack(side=tk.LEFT, padx=5)\n        \n        # Âúñ‰æãË™™Êòé\n        legend_frame = ttk.LabelFrame(frame, text='Âúñ‰æãË™™Êòé', padding=10)\n        legend_frame.pack(fill=tk.X, pady=5)\n        \n        ttk.Label(legend_frame, text='üîµ ËóçËâ≤Ê°Ü: ÁúãË∑åË®ÇÂñÆÂçÄ (HH‚ÜíLL)', foreground='blue').pack(anchor=tk.W)\n        ttk.Label(legend_frame, text='üü¢ Á∂†Ëâ≤Ê°Ü: ÁúãÊº≤Ë®ÇÂñÆÂçÄ (LL‚ÜíHH)', foreground='green').pack(anchor=tk.W)\n        ttk.Label(legend_frame, text='‚ñ≥/‚ñΩ: È´ò/‰ΩéÊ®ûÁ¥êÈªû (HH|HL|LL|LH)', foreground='purple').pack(anchor=tk.W)\n        ttk.Label(legend_frame, text='‚îÅ‚îÅ‚îÅ (ÈáëËâ≤): ÁµêÊßãÊâìÁ†¥ (BOS)', foreground='goldenrod').pack(anchor=tk.W)\n        ttk.Label(legend_frame, text='- - - (ÈùíËâ≤): ËßíËâ≤ËΩâÊèõ (CHoCH)', foreground='cyan').pack(anchor=tk.W)\n        \n        # ÂúñË°®Ê°ÜÊû∂\n        chart_frame = ttk.Frame(frame)\n        chart_frame.pack(fill=tk.BOTH, expand=True, pady=10)\n        \n        self.fig = Figure(figsize=(14, 6.5), dpi=100)\n        self.chart_canvas = FigureCanvasTkAgg(self.fig, master=chart_frame)\n        self.chart_canvas.get_tk_widget().pack(fill=tk.BOTH, expand=True)\n\n    def setup_stats_tab(self):\n        \"\"\"Ë®≠ÁΩÆÁµ±Ë®à‰ø°ÊÅØÊ®ôÁ±§È†Å\"\"\"\n        frame = ttk.LabelFrame(self.stats_frame, text='ÂàÜÊûêÁµêÊûúÁµ±Ë®à', padding=20)\n        frame.pack(fill=tk.BOTH, expand=True, padx=10, pady=10)\n        \n        self.stats_text = tk.Text(frame, height=30, width=80, wrap=tk.WORD)\n        scrollbar = ttk.Scrollbar(frame, orient=tk.VERTICAL, command=self.stats_text.yview)\n        self.stats_text.config(yscrollcommand=scrollbar.set)\n        \n        self.stats_text.pack(side=tk.LEFT, fill=tk.BOTH, expand=True)\n        scrollbar.pack(side=tk.RIGHT, fill=tk.Y)\n\n    def load_local_data(self):\n        \"\"\"Âä†ËºâÊú¨Âú∞Êï∏Êìö\"\"\"\n        try:\n            filepath = filedialog.askopenfilename(\n                filetypes=[(\"CSV Êñá‰ª∂\", \"*.csv\"), (\"Parquet Êñá‰ª∂\", \"*.parquet\")]\n            )\n            if filepath:\n                if filepath.endswith('.csv'):\n                    self.df = pd.read_csv(filepath, index_col=0, parse_dates=True)\n                else:\n                    self.df = pd.read_parquet(filepath)\n                \n                # Ê®ôÊ∫ñÂåñÂàóÂêç\n                self.df.columns = [col.lower() for col in self.df.columns]\n                self.update_load_status()\n                messagebox.showinfo('ÊàêÂäü', f'Â∑≤Âä†Ëºâ {len(self.df)} Ë°å')\n        except Exception as e:\n            messagebox.showerror('ÈåØË™§', f'Âä†ËºâÂ§±Êïó: {str(e)}')\n\n    def load_default_data(self):\n        \"\"\"Âä†ËºâÈªòË™çÊï∏Êìö\"\"\"\n        try:\n            path = 'data/btc_15m.parquet'\n            if not Path(path).exists():\n                path = 'btc_15m.parquet'\n            self.df = pd.read_parquet(path)\n            self.df.columns = [col.lower() for col in self.df.columns]\n            self.update_load_status()\n            messagebox.showinfo('ÊàêÂäü', f'Â∑≤Âä†Ëºâ {len(self.df)} Ë°å')\n        except Exception as e:\n            messagebox.showerror('ÈåØË™§', f'Âä†ËºâÂ§±Êïó: {str(e)}')\n\n    def load_from_yfinance(self):\n        \"\"\"Âæû Yahoo Finance ‰∏ãËºâÊï∏Êìö\"\"\"\n        try:\n            import yfinance as yf\n            dialog = tk.Toplevel(self.root)\n            dialog.title('‰∏ãËºâÂèÉÊï∏')\n            dialog.geometry('400x200')\n            \n            ttk.Label(dialog, text='‰ª£Á¢º (Â¶Ç: BTC-USD):').pack(pady=5)\n            ticker_entry = ttk.Entry(dialog, width=30)\n            ticker_entry.pack(pady=5)\n            ticker_entry.insert(0, 'BTC-USD')\n            \n            ttk.Label(dialog, text='ÊôÇÈñìÂë®Êúü (Â¶Ç: 1y):').pack(pady=5)\n            period_entry = ttk.Entry(dialog, width=30)\n            period_entry.pack(pady=5)\n            period_entry.insert(0, '1y')\n            \n            def download():\n                ticker = ticker_entry.get()\n                period = period_entry.get()\n                self.df = yf.download(ticker, period=period, progress=False)\n                self.df.columns = [col.lower() for col in self.df.columns]\n                self.update_load_status()\n                dialog.destroy()\n                messagebox.showinfo('ÊàêÂäü', f'Â∑≤Âä†Ëºâ {len(self.df)} Ë°å')\n            \n            ttk.Button(dialog, text='‰∏ãËºâ', command=download).pack(pady=20)\n        except Exception as e:\n            messagebox.showerror('ÈåØË™§', f'‰∏ãËºâÂ§±Êïó: {str(e)}')\n\n    def update_load_status(self):\n        \"\"\"Êõ¥Êñ∞Êï∏ÊìöÂä†ËºâÁãÄÊÖã\"\"\"\n        if self.df is not None:\n            self.load_status.config(text=f'‚úì Â∑≤Âä†Ëºâ: {len(self.df)} Ë°å', foreground='green')\n            info = f\"\"\"Ë°åÊï∏: {len(self.df)}\nÊó•ÊúüÁØÑÂúç: {self.df.index[0]} ~ {self.df.index[-1]}\nÂàó: {', '.join(self.df.columns.tolist())}\n\"\"\"\n            self.load_info.config(text=info)\n\n    def analyze_smc(self):\n        \"\"\"Âü∑Ë°å SMC ÂàÜÊûê\"\"\"\n        if self.df is None:\n            messagebox.showwarning('Ë≠¶Âëä', 'Ë´ãÂÖàÂä†ËºâÊï∏Êìö')\n            return\n        \n        try:\n            swing_length = int(self.swing_length_spinbox.get())\n            internal_length = int(self.internal_length_spinbox.get())\n            \n            # Âü∑Ë°åÂàÜÊûê\n            smc = SmartMoneyConceptsLuxAlgo(\n                self.df,\n                swing_length=swing_length,\n                internal_length=internal_length\n            )\n            self.smc_result = smc.analyze()\n            \n            # Áπ™Ë£ΩÂúñË°®\n            self.plot_smc_chart(swing_length)\n            \n            # Êõ¥Êñ∞Áµ±Ë®à‰ø°ÊÅØ\n            self.update_stats()\n            \n            messagebox.showinfo('ÂÆåÊàê', 'SMC ÂàÜÊûêÂÆåÊàê')\n        except Exception as e:\n            messagebox.showerror('ÈåØË™§', f'ÂàÜÊûêÂ§±Êïó: {str(e)}')\n            import traceback\n            traceback.print_exc()\n\n    def plot_smc_chart(self, swing_length: int):\n        \"\"\"Áπ™Ë£Ω SMC ÂúñË°®\"\"\"\n        self.fig.clear()\n        ax = self.fig.add_subplot(111)\n        \n        # È°ØÁ§∫ÊúÄÂæå 500 Ê†π K Á∑ö\n        n = len(self.df)\n        display_bars = min(500, n)\n        offset = n - display_bars\n        display_df = self.df.iloc[-display_bars:].reset_index(drop=True)\n        \n        price_min = display_df['low'].min()\n        price_max = display_df['high'].max()\n        price_range = price_max - price_min\n        \n        # 1. Áπ™Ë£ΩË®ÇÂñÆÂçÄÂ°ä\n        for ob in self.smc_result['order_blocks']:\n            display_start = ob.start_idx - offset\n            display_end = ob.end_idx - offset\n            \n            if display_end >= 0 and display_start < len(display_df):\n                plot_start = max(0, display_start)\n                plot_end = min(len(display_df) - 1, display_end)\n                width = plot_end - plot_start + 1\n                \n                if ob.is_mitigated:\n                    color = '#FF6B9D' if ob.block_type == 'bearish' else '#FFB3D9'\n                    alpha = 0.2\n                else:\n                    color = '#4169E1' if ob.block_type == 'bearish' else '#32CD32'\n                    alpha = 0.15\n                \n                rect = Rectangle(\n                    (plot_start - 0.5, ob.low),\n                    width,\n                    ob.high - ob.low,\n                    linewidth=1.5,\n                    edgecolor=color,\n                    facecolor=color,\n                    alpha=alpha,\n                    zorder=2\n                )\n                ax.add_patch(rect)\n        \n        # 2. Áπ™Ë£Ω K Á∑ö\n        for i in range(len(display_df)):\n            o, h, l, c = display_df.loc[i, ['open', 'high', 'low', 'close']]\n            color = '#00AA00' if c >= o else '#CC0000'\n            \n            # È´ò‰ΩéÁ∑ö\n            ax.plot([i, i], [l, h], color=color, linewidth=0.8, zorder=3, alpha=0.8)\n            \n            # ÈñãÊî∂Á∑ö\n            body_size = abs(c - o) if abs(c - o) > 0 else price_range * 0.001\n            body_bottom = min(o, c)\n            ax.bar(i, body_size, width=0.6, bottom=body_bottom,\n                   color=color, alpha=0.9, edgecolor=color, linewidth=0.5, zorder=3)\n        \n        # 3. Áπ™Ë£ΩÊ®ûÁ¥êÈªû\n        for p in self.smc_result['pivots_high_swing']:\n            idx = p.bar_index - offset\n            if 0 <= idx < len(display_df):\n                ax.plot(idx, p.current_level, marker='^', color='#8B0000',\n                       markersize=8, zorder=5, markeredgewidth=1)\n                ax.text(idx, p.current_level + price_range * 0.03, p.pivot_type,\n                       fontsize=7, ha='center', color='#8B0000', fontweight='bold')\n        \n        for p in self.smc_result['pivots_low_swing']:\n            idx = p.bar_index - offset\n            if 0 <= idx < len(display_df):\n                ax.plot(idx, p.current_level, marker='v', color='#006400',\n                       markersize=8, zorder=5, markeredgewidth=1)\n                ax.text(idx, p.current_level - price_range * 0.03, p.pivot_type,\n                       fontsize=7, ha='center', color='#006400', fontweight='bold')\n        \n        # 4. Áπ™Ë£ΩÁµêÊßãÊâìÁ†¥\n        for struct in self.smc_result['structures']:\n            idx = struct.bar_index - offset\n            if 0 <= idx < len(display_df):\n                if struct.structure_type == 'CHoCH':\n                    color = '#00CED1'\n                    linestyle = '--'\n                else:\n                    color = '#FFD700'\n                    linestyle = '-'\n                \n                ax.axvline(x=idx, color=color, linewidth=1.5, alpha=0.6, linestyle=linestyle, zorder=4)\n        \n        # 5. Ë®≠ÁΩÆÂúñË°®Ê®£Âºè\n        ax.set_xlabel(f'K Á∑öÁ¥¢Âºï (ÊúÄÂæå {display_bars} Ê†π)', fontsize=10)\n        ax.set_ylabel('ÂÉπÊ†º (USDT)', fontsize=10)\n        ax.set_title(f'Êô∫ÊÖßÈáëÈå¢Ê¶ÇÂøµÂàÜÊûê - ÊêñÊì∫Èï∑Â∫¶: {swing_length}', fontsize=12, fontweight='bold')\n        ax.grid(True, alpha=0.2)\n        ax.set_xlim(-1, len(display_df))\n        ax.set_ylim(price_min - price_range * 0.1, price_max + price_range * 0.1)\n        ax.set_facecolor('#f8f9fa')\n        \n        # Ê∑ªÂä†Âúñ‰æã\n        legend_elements = [\n            mpatches.Patch(color='#4169E1', alpha=0.15, label='ÁúãË∑å OB'),\n            mpatches.Patch(color='#32CD32', alpha=0.15, label='ÁúãÊº≤ OB'),\n            mpatches.Patch(color='#FFD700', alpha=0.6, label='BOS'),\n            mpatches.Patch(color='#00CED1', alpha=0.6, label='CHoCH'),\n        ]\n        ax.legend(handles=legend_elements, loc='upper left', fontsize=9)\n        \n        self.fig.tight_layout()\n        self.chart_canvas.draw()\n\n    def refresh_chart(self):\n        \"\"\"Âà∑Êñ∞ÂúñË°®\"\"\"\n        if self.smc_result is None:\n            messagebox.showwarning('Ë≠¶Âëä', 'Ë´ãÂÖàÂü∑Ë°å SMC ÂàÜÊûê')\n            return\n        \n        swing_length = int(self.swing_length_spinbox.get())\n        self.plot_smc_chart(swing_length)\n\n    def update_stats(self):\n        \"\"\"Êõ¥Êñ∞Áµ±Ë®à‰ø°ÊÅØ\"\"\"\n        if self.smc_result is None:\n            return\n        \n        stats_text = f\"\"\"\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë           Smart Money Concepts ÂàÜÊûêÁµêÊûúÁµ±Ë®à             ‚ïë\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\n„ÄêÊ®ûÁ¥êÈªûÊ™¢Ê∏¨„Äë\n‚îú‚îÄ È´òÊ®ûÁ¥êÈªû (HH + HL): {len(self.smc_result['pivots_high_swing'])}\n‚îú‚îÄ ‰ΩéÊ®ûÁ¥êÈªû (LL + LH): {len(self.smc_result['pivots_low_swing'])}\n‚îî‚îÄ ÂÖßÈÉ®ÁµêÊßãÈ´ò‰ΩéÈªû: {len(self.smc_result['pivots_high_internal']) + len(self.smc_result['pivots_low_internal'])}\n\n„ÄêË®ÇÂñÆÂçÄÂ°ä (Order Blocks)„Äë\n‚îú‚îÄ Á∏ΩÊï∏: {len(self.smc_result['order_blocks'])}\n‚îú‚îÄ ÁúãÊº≤ OB (LL‚ÜíHH): {sum(1 for ob in self.smc_result['order_blocks'] if ob.block_type == 'bullish')}\n‚îú‚îÄ ÁúãË∑å OB (HH‚ÜíLL): {sum(1 for ob in self.smc_result['order_blocks'] if ob.block_type == 'bearish')}\n‚îî‚îÄ Â∑≤Ë¢´Á†¥Â£û: {sum(1 for ob in self.smc_result['order_blocks'] if ob.is_mitigated)}\n\n„ÄêÁµêÊßãÊâìÁ†¥ (Structure Breaks)„Äë\n‚îú‚îÄ Á∏ΩÊï∏: {len(self.smc_result['structures'])}\n‚îú‚îÄ BOS (Break of Structure): {sum(1 for s in self.smc_result['structures'] if s.structure_type == 'BOS')}\n‚îú‚îÄ CHoCH (Change of Character): {sum(1 for s in self.smc_result['structures'] if s.structure_type == 'CHoCH')}\n‚îú‚îÄ ÁúãÊº≤ÁµêÊßã: {sum(1 for s in self.smc_result['structures'] if s.direction == 'bullish')}\n‚îî‚îÄ ÁúãË∑åÁµêÊßã: {sum(1 for s in self.smc_result['structures'] if s.direction == 'bearish')}\n\n„ÄêÁâπÊÆäÈªû‰Ωç„Äë\n‚îú‚îÄ Á≠âÈ´òÈªû (EQH): {len(self.smc_result['equal_highs'])}\n‚îî‚îÄ Á≠â‰ΩéÈªû (EQL): {len(self.smc_result['equal_lows'])}\n\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n‚ïë                    ÊúÄËøëÊ®ûÁ¥êÈªûË©≥ÊÉÖ                          ‚ïë\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\"\"\"\n        \n        # È°ØÁ§∫ÊúÄËøëÁöÑÊ®ûÁ¥êÈªû\n        if self.smc_result['pivots_high_swing']:\n            stats_text += \"\\n„ÄêÊúÄËøëÁöÑÈ´òÊ®ûÁ¥êÈªû (ÊúÄÊñ∞ 5 ÂÄã)„Äë\\n\"\n            for p in self.smc_result['pivots_high_swing'][-5:]:\n                stats_text += f\"‚îú‚îÄ È°ûÂûã: {p.pivot_type}, ÂÉπÊ†º: {p.current_level:.2f}, Á¥¢Âºï: {p.bar_index}\\n\"\n        \n        if self.smc_result['pivots_low_swing']:\n            stats_text += \"\\n„ÄêÊúÄËøëÁöÑ‰ΩéÊ®ûÁ¥êÈªû (ÊúÄÊñ∞ 5 ÂÄã)„Äë\\n\"\n            for p in self.smc_result['pivots_low_swing'][-5:]:\n                stats_text += f\"‚îú‚îÄ È°ûÂûã: {p.pivot_type}, ÂÉπÊ†º: {p.current_level:.2f}, Á¥¢Âºï: {p.bar_index}\\n\"\n        \n        self.stats_text.delete('1.0', tk.END)\n        self.stats_text.insert('1.0', stats_text)\n\n\ndef main():\n    root = tk.Tk()\n    app = ImprovedModelEnsembleGUI(root)\n    root.mainloop()\n\n\nif __name__ == '__main__':\n    main()\n", "_requires_user_approval": false, "_tool_input_summary": "Update main GUI to integrate the LuxAlgo SMC indicator with improved charting logic, parameter controls, and comprehensive statistics display."}